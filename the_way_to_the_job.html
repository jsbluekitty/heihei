<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script
    type="text/javascript" src="//api.map.baidu.com/api?v=2.0&ak=u6sjoftdrh3uYLALMtutnP5a9BNU8exG"></script>
    <script
    type="text/javascript" src="//api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>牛逼招聘薪资热力图</title>
    <style type="text/css">
		ul,li{list-style: none;margin:0;padding:0;float:left;}
		html{height:100%}
		body{height:100%;margin:0px;padding:70px;font-family:"微软雅黑";}
		#container{height:500px;width:100%;}
		#r-result{width:100%;}
    </style>
</head>
<body>
	<div id="container"></div>
	<div id="r-result">
    <h1>好康的热力图</h1>
    <h4>FROM JSbluekitty</h4>
    <h6>嘿嘿</h6>
		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>
	</div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(120.386893, 36.070326);
    map.centerAndZoom(point, 6);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放

    var points =[
   {"lat":31.155454317980737,"lng":121.13055310467274,"count":2.50-3.50},
{"lat":31.70644661174212,"lng":119.94861167229404,"count":0.80-1.50},
{"lat":31.303564074441766,"lng":120.59241222959322,"count":1.50-2.00},
{"lat":23.187491541424553,"lng":113.48707083968644,"count":1.25-1.67},
{"lat":32.009369695446466,"lng":118.73856944695221,"count":1.00-1.40},
{"lat":30.265916325588922,"lng":120.13643801205312,"count":1.00-2.00},
{"lat":36.65655420178723,"lng":117.12639941261048,"count":0.30-0.60},
{"lat":22.538500195784383,"lng":113.93653916925258,"count":0.60-0.80},
{"lat":22.718807064666724,"lng":114.05116753364601,"count":1.00-2.00},
{"lat":26.05852815064472,"lng":119.32052821101611,"count":0.80-1.50},
{"lat":30.50633395680806,"lng":114.35045554601551,"count":0.60-1.20},
{"lat":36.685532751420155,"lng":117.53256537436938,"count":0.80-1.00},
{"lat":31.893034474486427,"lng":117.32549077295636,"count":1.00-1.50},
{"lat":23.16431683445584,"lng":113.27943309061779,"count":0.70-0.90},
{"lat":22.538500195784383,"lng":113.93653916925258,"count":2.00-3.00},
{"lat":31.269746698931357,"lng":121.51158645453457,"count":0.80-1.50},
{"lat":31.958526869176943,"lng":118.84656705909214,"count":1.50-3.00},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":1.40-2.50},
{"lat":31.194556772822725,"lng":121.44339635276381,"count":1.00-2.50},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":0.70-1.00},
{"lat":31.3801553396772,"lng":121.27259505835202,"count":1.00-2.50},
{"lat":31.265524144657057,"lng":121.53251993732523,"count":1.30-3.00},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":0.80-1.00},
{"lat":29.568996245338923,"lng":106.55843415537664,"count":0.80-1.50},
{"lat":39.96548984110075,"lng":116.3054340544974,"count":0.60-0.80},
{"lat":23.135336306695006,"lng":113.27143134445974,"count":1.50-2.00},
{"lat":31.265524144657057,"lng":121.53251993732523,"count":1.00-1.50},
{"lat":32.009369695446466,"lng":118.73856944695221,"count":1.00-1.50},
{"lat":31.303564074441766,"lng":120.59241222959322,"count":0.50-0.70},
{"lat":23.187491541424553,"lng":113.48707083968644,"count":1.00-1.80},
{"lat":30.923720110285377,"lng":121.48050373643107,"count":2.50-3.00},
{"lat":39.96548984110075,"lng":116.3054340544974,"count":2.00-2.50},
{"lat":30.2633105670119,"lng":120.21153877811217,"count":1.00-1.50},
{"lat":31.958526869176943,"lng":118.84656705909214,"count":0.50-0.80},
{"lat":31.254973368279597,"lng":121.40356934916508,"count":1.00-1.67},
{"lat":31.571645024134835,"lng":120.30959951436182,"count":2.50-3.33},
{"lat":22.538500195784383,"lng":113.93653916925258,"count":2.80-5.00},
{"lat":30.559566983522483,"lng":114.32254851755089,"count":1.20-2.00},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":0.45-0.60},
{"lat":31.958526869176943,"lng":118.84656705909214,"count":1.00-1.50},
{"lat":23.16431683445584,"lng":113.27943309061779,"count":2.00-3.00},
{"lat":24.14484938424716,"lng":120.690907971296,"count":0.60-0.80},
{"lat":39.910924547299565,"lng":116.4133836971231,"count":1.00-1.50},
{"lat":31.233844930401652,"lng":121.45343177276851,"count":1.50-3.50},
{"lat":31.226847968225428,"lng":121.43045437545099,"count":0.80-1.00},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":1.30-2.00},
{"lat":23.13035783510465,"lng":113.36850942427998,"count":0.80-1.80},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":1.00-1.50},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":3.00-4.00},
{"lat":32.04513860640491,"lng":118.80040736097028,"count":1.00-1.50},
{"lat":31.265524144657057,"lng":121.53251993732523,"count":1.00-1.50},
{"lat":26.080429420698078,"lng":119.30346983854001,"count":0.80-1.00},
{"lat":36.65655420178723,"lng":117.12639941261048,"count":1.00-2.00},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":2.50-3.50},
{"lat":31.226847968225428,"lng":121.43045437545099,"count":1.50-2.00},
{"lat":31.498809732685714,"lng":120.31858328810601,"count":1.50-2.00},
{"lat":26.653324822309752,"lng":106.63657676352776,"count":0.80-1.00},
{"lat":23.135336306695006,"lng":113.27143134445974,"count":1.20-2.00},
{"lat":43.82195350104314,"lng":125.3306020759069,"count":1.00-1.50},
{"lat":22.528465912071983,"lng":114.06154700465763,"count":1.50-2.00},
{"lat":31.3304431437088,"lng":120.7298897133152,"count":1.00-1.50},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":1.00-1.50},
{"lat":32.06467927792303,"lng":118.63460405875492,"count":1.67-4.17},
{"lat":30.265916325588922,"lng":120.13643801205312,"count":1.00-1.50},
{"lat":31.83809466449814,"lng":117.14175675377852,"count":1.00-1.50},
{"lat":29.824206349995904,"lng":121.55542706991011,"count":0.60-1.00},
{"lat":22.548456637984177,"lng":114.06455183658751,"count":3.00-5.00},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":1.00-1.50},
{"lat":22.548456637984177,"lng":114.06455183658751,"count":1.00-1.50},
{"lat":30.655821878416408,"lng":104.08153351042463,"count":1.10-1.70},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":2.00-2.50},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":1.50-2.00},
{"lat":26.080429420698078,"lng":119.30346983854001,"count":0.80-1.50},
{"lat":34.34726881662395,"lng":108.94646555063274,"count":0.80-1.50},
{"lat":30.5983019079268,"lng":104.07278895543774,"count":0.60-0.80},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":1.50-2.00},
{"lat":24.485406605176305,"lng":118.09643549976651,"count":0.40-0.55},
{"lat":31.23724715206362,"lng":121.49158559252436,"count":0.80-1.00},
{"lat":30.5983019079268,"lng":104.07278895543774,"count":1.00-1.50},
{"lat":31.233844930401652,"lng":121.45343177276851,"count":1.50-2.00},
{"lat":31.226847968225428,"lng":121.43045437545099,"count":1.50-2.50},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":0.90-1.10},
{"lat":31.358536655799266,"lng":118.43943137653523,"count":0.60-1.20},
{"lat":28.241488836472605,"lng":112.93744764409885,"count":1.30-1.80},
{"lat":31.194556772822725,"lng":121.44339635276381,"count":1.50-3.00},
{"lat":30.655821878416408,"lng":104.08153351042463,"count":1.67-2.50},
{"lat":34.75343885045448,"lng":113.63141920733915,"count":1.00-1.50},
{"lat":30.5983019079268,"lng":104.07278895543774,"count":1.50-3.00},
{"lat":30.697446484492378,"lng":111.29254921035434,"count":0.60-1.20},
{"lat":22.779937322886564,"lng":113.883220335556,"count":1.00-2.50},
{"lat":30.47591408770855,"lng":114.40890981266915,"count":0.80-1.50},
{"lat":29.723927343006626,"lng":106.6375590606026,"count":0.80-1.50},
{"lat":34.75090896852051,"lng":113.76700701559034,"count":1.00-1.30},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":3.50-4.00},
{"lat":30.50633395680806,"lng":114.35045554601551,"count":1.50-3.00},
{"lat":31.194556772822725,"lng":121.44339635276381,"count":1.50-2.50},
{"lat":31.37468992149277,"lng":120.6485659358358,"count":1.50-2.00},
{"lat":39.926374523079886,"lng":116.44955872950158,"count":2.00-4.00},
{"lat":22.538500195784383,"lng":113.93653916925258,"count":1.50-2.50},
{"lat":23.02775875078891,"lng":113.12851219549718,"count":1.50-2.50},
{"lat":22.528465912071983,"lng":114.06154700465763,"count":2.50-3.00},
{"lat":30.6072822768268,"lng":114.27750613182234,"count":0.60-1.00},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":1.50-2.00},
{"lat":28.241488836472605,"lng":112.93744764409885,"count":1.50-2.00},
{"lat":39.00941577364663,"lng":117.71739882966088,"count":1.00-1.40},
{"lat":28.241488836472605,"lng":112.93744764409885,"count":1.50-2.50},
{"lat":31.118842580087428,"lng":121.38861193361008,"count":2.50-3.00},
{"lat":39.926374523079886,"lng":116.44955872950158,"count":3.00-5.00},
{"lat":23.08898129664783,"lng":113.32353998097368,"count":1.50-2.50},
{"lat":23.02730841164339,"lng":113.75842045787648,"count":0.60-0.80},
{"lat":39.91812360584148,"lng":116.37251358116619,"count":1.20-1.80},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":1.50-2.20},
{"lat":34.21266655011306,"lng":117.29057543439453,"count":1.00-2.00},
{"lat":23.13035783510465,"lng":113.36850942427998,"count":1.50-2.00},
{"lat":30.598466736400987,"lng":114.31158155473231,"count":1.70-2.10},
{"lat":22.560032908924555,"lng":113.89042744066019,"count":1.50-3.00},
{"lat":36.65655420178723,"lng":117.12639941261048,"count":0.80-1.20},
{"lat":32.05475668294885,"lng":118.80441263574761,"count":1.00-2.00},
{"lat":31.3304431437088,"lng":120.7298897133152,"count":2.50-3.00},
{"lat":37.87698902884778,"lng":112.55639149167204,"count":0.50-1.00},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":0.80-1.00},
{"lat":23.13035783510465,"lng":113.36850942427998,"count":2.00-3.00},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":1.00-2.00},
{"lat":23.08898129664783,"lng":113.32353998097368,"count":0.80-1.00},
{"lat":22.538500195784383,"lng":113.93653916925258,"count":1.00-2.00},
{"lat":30.5983019079268,"lng":104.07278895543774,"count":1.80-2.40},
{"lat":31.235929042252014,"lng":121.48053886017651,"count":2.50-3.33},
{"lat":39.8649371975573,"lng":116.29240188731139,"count":0.70-1.00},
{"lat":23.13035783510465,"lng":113.36850942427998,"count":0.50-1.50},
{"lat":39.91812360584148,"lng":116.37251358116619,"count":1.25-2.08},
{"lat":24.485406605176305,"lng":118.09643549976651,"count":1.50-2.00},
{"lat":22.538500195784383,"lng":113.93653916925258,"count":1.50-2.50},
{"lat":23.08898129664783,"lng":113.32353998097368,"count":0.80-1.50},
{"lat":32.06467927792303,"lng":118.63460405875492,"count":0.80-1.50},
{"lat":22.538500195784383,"lng":113.93653916925258,"count":2.50-4.00},
{"lat":30.50633395680806,"lng":114.35045554601551,"count":1.50-3.00},
{"lat":23.02775875078891,"lng":113.12851219549718,"count":1.00-1.50},
{"lat":39.8649371975573,"lng":116.29240188731139,"count":1.50-2.00},
{"lat":23.13035783510465,"lng":113.36850942427998,"count":1.20-1.90},
{"lat":22.538500195784383,"lng":113.93653916925258,"count":1.00-1.50},
{"lat":41.80227413880463,"lng":123.46546103537524,"count":0.45-0.60},
{"lat":22.548456637984177,"lng":114.06455183658751,"count":1.67-4.17},
{"lat":22.718807064666724,"lng":114.05116753364601,"count":1.50-2.50},
{"lat":30.655821878416408,"lng":104.08153351042463,"count":0.80-1.20},
{"lat":30.38156421818202,"lng":114.32855126446022,"count":0.50-0.80},
{"lat":31.826577833686887,"lng":117.23344266497664,"count":1.00-1.50},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":1.5-2.0},
{"lat":39.8649371975573,"lng":116.29240188731139,"count":0.8-1},
{"lat":36.31288619735009,"lng":120.40252679394416,"count":0.6-1},
{"lat":31.227348292436346,"lng":121.55045460683195,"count":1-1.5},
{"lat":30.661904490317255,"lng":104.08956175659785,"count":0.8-1.6},
{"lat":22.548456637984177,"lng":114.06455183658751,"count":4.0-5.0},
];

    if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1.
		    value 为颜色值.
     */
	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":27});
	map.addOverlay(heatmapOverlay);
	heatmapOverlay.setDataSet({data:points,max:100});
	//是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
	function closeHeatmap(){
        heatmapOverlay.hide();
    }
	closeHeatmap();
    function setGradient(){
     	/*格式如下所示:
		{
	  		0:'rgb(102, 255, 0)',
	 	 	.5:'rgb(255, 170, 0)',
		  	1:'rgb(255, 0, 0)'
		}*/
     	var gradient = {.1:'rgb(0, 255, 255)',
			.2:'rgb(0, 110, 255)',
			.9:'rgb(100, 0, 255)'};
     	var colors = document.querySelectorAll("input[type='color']");
     	colors = [].slice.call(colors,0);
     	colors.forEach(function(ele){
			gradient[ele.getAttribute("data-key")] = ele.value;
     	});
        heatmapOverlay.setOptions({"gradient":gradient});
    }
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>